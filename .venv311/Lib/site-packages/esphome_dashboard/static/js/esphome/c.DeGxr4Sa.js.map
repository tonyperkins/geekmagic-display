{"version":3,"file":"c.DeGxr4Sa.js","sources":["../../../../src/show-api-key/show-api-key-dialog.ts"],"sourcesContent":["import { LitElement, html, css, PropertyValues } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport \"@material/mwc-button\";\nimport \"@material/mwc-dialog\";\nimport { esphomeDialogStyles } from \"../styles\";\nimport { copyToClipboard } from \"../util/copy-clipboard\";\nimport { openEditDialog } from \"../editor\";\nimport { getConfigurationApiKey } from \"../api/configuration\";\n\n@customElement(\"esphome-show-api-key-dialog\")\nclass ESPHomeShowApiKeyDialogDialog extends LitElement {\n  @property() public configuration!: string;\n\n  @state() private _apiKey?: string | null;\n\n  @state() private _showCopied = false;\n\n  protected render() {\n    return html`\n      <mwc-dialog\n        open\n        heading=${`API key for ${this.configuration}`}\n        scrimClickAction\n        @closed=${this._handleClose}\n      >\n        ${this._apiKey === undefined\n          ? \"Loadingâ€¦\"\n          : this._apiKey === null\n            ? html`Unable to automatically extract API key. It may not be set.\n                Open the configuration and look for <code>api:</code>.`\n            : html`\n                <div class=\"key\" @click=${this._copyApiKey}>\n                  <code>${this._apiKey}</code>\n                  <mwc-button ?disabled=${this._showCopied}\n                    >${this._showCopied ? \"Copied!\" : \"Copy\"}</mwc-button\n                  >\n                </div>\n              `}\n        ${this._apiKey === null\n          ? html`\n              <mwc-button\n                @click=${this._editConfig}\n                no-attention\n                slot=\"secondaryAction\"\n                dialogAction=\"close\"\n                label=\"Open configuration\"\n              ></mwc-button>\n            `\n          : \"\"}\n\n        <mwc-button\n          no-attention\n          slot=\"primaryAction\"\n          dialogAction=\"close\"\n          label=\"Close\"\n        ></mwc-button>\n      </mwc-dialog>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n\n    getConfigurationApiKey(this.configuration).then((key) => {\n      this._apiKey = key;\n    });\n  }\n\n  private _copyApiKey() {\n    copyToClipboard(this._apiKey!);\n    this._showCopied = true;\n    setTimeout(() => (this._showCopied = false), 2000);\n  }\n\n  private _editConfig() {\n    openEditDialog(this.configuration);\n  }\n\n  private _handleClose() {\n    this.parentNode!.removeChild(this);\n  }\n\n  static styles = [\n    esphomeDialogStyles,\n    css`\n      .key {\n        position: relative;\n        display: flex;\n        align-items: center;\n      }\n      code {\n        word-break: break-all;\n      }\n      .key mwc-button {\n        margin-left: 16px;\n      }\n      .copied {\n        font-weight: bold;\n        color: var(--alert-success-color);\n\n        position: absolute;\n        background-color: var(--mdc-theme-surface, #fff);\n        padding: 10px;\n        right: 0;\n        font-size: 1.2em;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"esphome-show-api-key-dialog\": ESPHomeShowApiKeyDialogDialog;\n  }\n}\n"],"names":["ESPHomeShowApiKeyDialogDialog","LitElement","constructor","this","_showCopied","render","html","configuration","_handleClose","undefined","_apiKey","_copyApiKey","_editConfig","firstUpdated","changedProps","super","getConfigurationApiKey","then","key","copyToClipboard","setTimeout","openEditDialog","parentNode","removeChild","styles","esphomeDialogStyles","css","__decorate","property","prototype","state","customElement"],"mappings":"mKAUA,IAAMA,EAAN,cAA4CC,EAA5C,WAAAC,uBAKmBC,KAAWC,aAAG,EAErB,MAAAC,GACR,OAAOC,CAAI;;;kBAGG,eAAeH,KAAKI;;kBAEpBJ,KAAKK;;eAEIC,IAAjBN,KAAKO,QACH,WACiB,OAAjBP,KAAKO,QACHJ,CAAI;wEAEJA,CAAI;0CACwBH,KAAKQ;0BACrBR,KAAKO;0CACWP,KAAKC;uBACxBD,KAAKC,YAAc,UAAY;;;;UAI3B,OAAjBD,KAAKO,QACHJ,CAAI;;yBAESH,KAAKS;;;;;;cAOlB;;;;;;;;;MAYA,YAAAC,CAAaC,GACrBC,MAAMF,aAAaC,GAEnBE,EAAuBb,KAAKI,eAAeU,MAAMC,IAC/Cf,KAAKO,QAAUQ,CAAG,IAId,WAAAP,GACNQ,EAAgBhB,KAAKO,SACrBP,KAAKC,aAAc,EACnBgB,YAAW,IAAOjB,KAAKC,aAAc,GAAQ,KAGvC,WAAAQ,GACNS,EAAelB,KAAKI,eAGd,YAAAC,GACNL,KAAKmB,WAAYC,YAAYpB,QAGxBH,EAAAwB,OAAS,CACdC,EACAC,CAAG;;;;;;;;;;;;;;;;;;;;;;OAzEcC,EAAA,CAAlBC,KAAyC5B,EAAA6B,UAAA,qBAAA,GAEzBF,EAAA,CAAhBG,KAAwC9B,EAAA6B,UAAA,eAAA,GAExBF,EAAA,CAAhBG,KAAoC9B,EAAA6B,UAAA,mBAAA,GALjC7B,EAA6B2B,EAAA,CADlCI,EAAc,gCACT/B"}