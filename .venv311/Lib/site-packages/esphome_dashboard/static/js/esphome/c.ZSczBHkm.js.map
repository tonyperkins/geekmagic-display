{"version":3,"file":"c.ZSczBHkm.js","sources":["../../../../src/compile/compile-dialog.ts"],"sourcesContent":["import { LitElement, html, css } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport \"@material/mwc-button\";\nimport \"../components/remote-process\";\nimport \"../components/process-dialog\";\nimport { openCompileDialog } from \".\";\nimport { openDownloadTypeDialog } from \"../download-type\";\nimport { esphomeDialogStyles } from \"../styles\";\n\n@customElement(\"esphome-compile-dialog\")\nclass ESPHomeCompileDialog extends LitElement {\n  @property() public configuration!: string;\n  @property() public platformSupportsWebSerial!: boolean;\n\n  @property() public downloadFactoryFirmware = true;\n\n  @state() private _result?: number;\n\n  protected render() {\n    return html`\n      <esphome-process-dialog\n        .heading=${`Download ${this.configuration}`}\n        .type=${\"compile\"}\n        .spawnParams=${{ configuration: this.configuration }}\n        @closed=${this._handleClose}\n        @process-done=${this._handleProcessDone}\n      >\n        ${this._result === undefined\n          ? \"\"\n          : this._result === 0\n            ? html`\n                <mwc-button\n                  slot=\"secondaryAction\"\n                  label=\"Download\"\n                  @click=${this._handleDownload}\n                ></mwc-button>\n              `\n            : html`\n                <mwc-button\n                  slot=\"secondaryAction\"\n                  dialogAction=\"close\"\n                  label=\"Retry\"\n                  @click=${this._handleRetry}\n                ></mwc-button>\n              `}\n      </esphome-process-dialog>\n    `;\n  }\n\n  private _handleProcessDone(ev: { detail: number }) {\n    this._result = ev.detail;\n\n    if (ev.detail !== 0) {\n      return;\n    }\n\n    openDownloadTypeDialog(this.configuration, this.platformSupportsWebSerial);\n  }\n\n  private _handleDownload() {\n    openDownloadTypeDialog(this.configuration, this.platformSupportsWebSerial);\n  }\n\n  private _handleRetry() {\n    openCompileDialog(this.configuration, this.platformSupportsWebSerial);\n  }\n\n  private _handleClose() {\n    this.parentNode!.removeChild(this);\n  }\n\n  static styles = [\n    esphomeDialogStyles,\n    css`\n      a {\n        text-decoration: none;\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"esphome-compile-dialog\": ESPHomeCompileDialog;\n  }\n}\n"],"names":["ESPHomeCompileDialog","LitElement","constructor","this","downloadFactoryFirmware","render","html","configuration","_handleClose","_handleProcessDone","undefined","_result","_handleDownload","_handleRetry","ev","detail","openDownloadTypeDialog","platformSupportsWebSerial","openCompileDialog","parentNode","removeChild","styles","esphomeDialogStyles","css","__decorate","property","prototype","state","customElement"],"mappings":"4SAUA,IAAMA,EAAN,cAAmCC,EAAnC,WAAAC,uBAIqBC,KAAuBC,yBAAG,EAInC,MAAAC,GACR,OAAOC,CAAI;;mBAEI,YAAYH,KAAKI;gBACpB;uBACO,CAAEA,cAAeJ,KAAKI;kBAC3BJ,KAAKK;wBACCL,KAAKM;;eAEFC,IAAjBP,KAAKQ,QACH,GACiB,IAAjBR,KAAKQ,QACHL,CAAI;;;;2BAISH,KAAKS;;gBAGlBN,CAAI;;;;;2BAKSH,KAAKU;;;;MAOtB,kBAAAJ,CAAmBK,GACzBX,KAAKQ,QAAUG,EAAGC,OAEA,IAAdD,EAAGC,QAIPC,EAAuBb,KAAKI,cAAeJ,KAAKc,2BAG1C,eAAAL,GACNI,EAAuBb,KAAKI,cAAeJ,KAAKc,2BAG1C,YAAAJ,GACNK,EAAkBf,KAAKI,cAAeJ,KAAKc,2BAGrC,YAAAT,GACNL,KAAKgB,WAAYC,YAAYjB,QAGxBH,EAAAqB,OAAS,CACdC,EACAC,CAAG;;;;OA9DcC,EAAA,CAAlBC,KAAyCzB,EAAA0B,UAAA,qBAAA,GACvBF,EAAA,CAAlBC,KAAsDzB,EAAA0B,UAAA,iCAAA,GAEpCF,EAAA,CAAlBC,KAAiDzB,EAAA0B,UAAA,+BAAA,GAEjCF,EAAA,CAAhBG,KAAiC3B,EAAA0B,UAAA,eAAA,GAN9B1B,EAAoBwB,EAAA,CADzBI,EAAc,2BACT5B"}